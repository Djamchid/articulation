<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jeu de Prononciation</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="game-container">
        <!-- √âCRAN DE CALIBRATION -->
        <div id="calibration-screen" class="screen active">
            <div class="game-header">
                <div class="game-progress">Initialisation</div>
            </div>
            
            <div class="game-content">
                <div class="calibration-box">
                    <div class="calibration-title">
                        üé§ Calibrage du microphone
                    </div>
                    <div style="margin-bottom: 16px;">
                        Cliquez sur "Autoriser" puis dites "BONJOUR" √† voix normale
                    </div>
                    <div class="level-bar">
                        <div id="calibration-level" class="level-fill" style="width: 0%;"></div>
                    </div>
                    <div style="text-align: center; font-size: 14px; color: #64748b;">
                        Niveau d√©tect√©: <span id="calibration-percentage">0</span>%
                    </div>
                </div>
                
                <div class="icon inactive" id="calibration-icon">
                    üé§
                </div>
                
                <!-- Visualiseur audio -->
                <div class="audio-visualizer" id="calibration-visualizer">
                    <div class="audio-bar"></div>
                    <div class="audio-bar"></div>
                    <div class="audio-bar"></div>
                    <div class="audio-bar"></div>
                    <div class="audio-bar"></div>
                </div>
            </div>
            
            <div class="game-footer">
                <button class="button primary" onclick="game.startCalibration()" id="calibrate-btn">
                    üé§ Activer le micro
                </button>
                <button class="button success" onclick="game.startGame()" id="start-btn" style="display: none;">
                    ‚úì Commencer
                </button>
            </div>
        </div>

        <!-- √âCRAN D'AFFICHAGE DU MOT -->
        <div id="display-screen" class="screen">
            <div class="game-header">
                <div class="game-progress" id="game-progress">
                    Mot 1/30 ‚Ä¢ Score: 0/0
                </div>
            </div>
            
            <div id="attempt-counter" class="attempt-counter">
                Essai 1/3
            </div>
            
            <div class="game-content">
                <div class="instruction">Pr√©parez-vous √† prononcer :</div>
                <div class="word-display" id="current-word">√âCLAIR</div>
                
                <div class="progress-bar">
                    <div id="preparation-progress" class="progress-fill countdown" style="width: 0%;"></div>
                </div>
                <div class="countdown-text" id="preparation-text">
                    Ouverture du micro dans 2s
                </div>
            </div>
        </div>

        <!-- √âCRAN D'√âCOUTE ACTIVE -->
        <div id="listening-screen" class="screen">
            <div class="game-header">
                <div class="game-progress" id="listening-progress">
                    Mot 1/30 ‚Ä¢ Score: 0/0
                </div>
            </div>
            
            <div id="listening-counter" class="attempt-counter">
                Essai 1/3
            </div>
            
            <div class="game-content">
                <div class="word-display" id="listening-word">√âCLAIR</div>
                
                <div class="icon active" id="listening-icon">
                    üé§
                </div>
                
                <!-- Visualiseur audio actif -->
                <div class="audio-visualizer active" id="listening-visualizer">
                    <div class="audio-bar"></div>
                    <div class="audio-bar"></div>
                    <div class="audio-bar"></div>
                    <div class="audio-bar"></div>
                    <div class="audio-bar"></div>
                    <div class="audio-bar"></div>
                    <div class="audio-bar"></div>
                </div>
                
                <div class="instruction emphasized">
                    JE VOUS √âCOUTE
                </div>
                
                <div class="speech-feedback" id="speech-feedback">
                    <span id="interim-transcript"></span>
                </div>
            </div>
            
            <div class="game-footer">
                <button class="button secondary" onclick="game.stopListening()">
                    ‚èπÔ∏è Arr√™ter
                </button>
            </div>
        </div>

        <!-- √âCRAN DE TRAITEMENT -->
        <div id="processing-screen" class="screen">
            <div class="game-header">
                <div class="game-progress" id="processing-progress">
                    Mot 1/30 ‚Ä¢ Score: 0/0
                </div>
            </div>
            
            <div id="processing-counter" class="attempt-counter">
                Essai 1/3
            </div>
            
            <div class="game-content">
                <div class="word-display" id="processing-word">√âCLAIR</div>
                
                <div class="spinner"></div>
                
                <div class="instruction">Analyse en cours...</div>
                <div class="countdown-text" id="processing-text">
                    ‚ö° Comparaison avec le lexique
                </div>
            </div>
        </div>

        <!-- √âCRAN DE R√âSULTAT -->
        <div id="result-screen" class="screen">
            <div class="game-header">
                <div class="game-progress" id="result-progress">
                    Mot 1/30 ‚Ä¢ Score: 1/1
                </div>
            </div>
            
            <div class="game-content" id="result-content">
                <!-- Contenu dynamique selon le type de r√©sultat -->
            </div>
            
            <div class="game-footer" id="result-footer">
                <!-- Boutons dynamiques selon le r√©sultat -->
            </div>
        </div>

        <!-- √âCRAN D'ERREUR -->
        <div id="error-screen" class="screen">
            <div class="game-header">
                <div class="game-progress" id="error-progress">
                    Mot 1/30 ‚Ä¢ Score: 0/0
                </div>
            </div>
            
            <div id="error-counter" class="attempt-counter">
                Essai 1/3
            </div>
            
            <div class="game-content">
                <div class="word-display" id="error-word">√âCLAIR</div>
                
                <div class="error-message" id="error-message">
                    <!-- Message d'erreur dynamique -->
                </div>
            </div>
            
            <div class="game-footer" id="error-footer">
                <!-- Boutons d'erreur dynamiques -->
            </div>
        </div>

        <!-- √âCRAN SCORE FINAL -->
        <div id="final-screen" class="screen">
            <div class="game-header">
                <div class="game-progress">Jeu termin√©</div>
            </div>
            
            <div class="game-content">
                <div class="instruction">Score final</div>
                <div class="score-display" id="final-score">24/30</div>
                <div class="instruction" style="font-size: 18px; color: var(--color-success);" id="final-percentage">
                    80% de r√©ussite
                </div>
                <div style="margin: 20px 0; color: var(--color-text-secondary); font-size: 14px;">
                    F√©licitations !<br />
                    Votre prononciation s'am√©liore
                </div>
                
                <div class="word-history" id="word-history">
                    <!-- Historique des mots -->
                </div>
            </div>
            
            <div class="game-footer">
                <button class="button success" onclick="game.restartGame()">
                    üéØ Rejouer
                </button>
                <button class="button secondary" onclick="game.toggleDetails()">
                    üìä D√©tails
                </button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script type="module" src="lexique.js"></script>
    <script type="module" src="audio-manager.js"></script>
    <script type="module" src="game.js"></script>
</body>
</html>
